> 一、什么是同步？什么是异步？

### 同步JavaScript

个人理解：由于js是单线程的机制，也就是说一次只能执行一个任务，导致当一个同步任务在执行时候，其他任务进入等待状态，也就是阻塞。比如下面这个例子：
```js
function foo() {
  // do somthing ...
  alert(); // 如果用户不点击alert框，则后续代码永远不会执行
  // do somthing ...
}
```
### 异步JavaScript
当我们从服务器请求一个图片，一般这种情况不能立即得到结果，请求信息在网络中传输肯定要消耗一定的时间，而这种请求网络资源的时间要远大于程序执行的时间。像下面这种情况就不能正常工作。
```js
var response = fetch('myImage.png');
var blob = response.blob();
// display your image blob in the UI somehow
```
因为你不知道下载图片会多久，所以第二行代码执行的时候可能报错（可能间歇的，也可能每次）因为图像还没有就绪。取代的方法就是，代码必须等到 response 返回才能继续往下执行。

在JavaScript代码中，我们一般遇到两种异步编程风格：老派callbacks，新派promise
> 二、什么是宏任务？什么是微任务？

宏任务和微任务都是异步任务。

常见的宏任务🈶️setTimeout、setInterval、I/O操作等。

常见的微任务就是Promise.then、Promise.catch、Promise.finally。**注意：new Promise(callback)中calllback的执行是同步任务**
js中，说到宏任务和微任务，就会说到js的事件循环（Event Loop）。

而事件循环的执行顺序是这样的：
#### 在主线程上添加宏任务与微任务

主线程 => 主线程上创建的微任务 => 主线程上创建的宏任务

#### 在微任务中创建微任务

执行顺序：主线程 => 主线程上创建的微任务1 => 微任务1上创建的微任务2 => 主线程上创建的宏任务

#### 宏任务中创建微任务

执行顺序：主线程 => 主线程上的宏任务队列1 => 宏任务队列1中创建的微任务

#### 微任务队列中创建的宏任务

执行顺序：主线程 => 主线程上创建的微任务 => 主线程上创建的宏任务 => 微任务中创建的宏任务

#### 总结：

微任务队列优先于宏任务队列执行，微任务队列上创建的宏任务会被后添加到当前宏任务队列的尾端，微任务队列中创建的微任务会被添加到微任务队列的尾端。只要微任务队列中还有任务，宏任务队列就只会等待微任务队列执行完毕后再执行。

事件循环参考： https://www.cnblogs.com/jiangyuzhen/p/11064408.html